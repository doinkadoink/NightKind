<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NightKind Collective - Alt Fashion for Bat Conservation</title>
    <meta name="description" content="Alternative fashion supporting bat conservation through partnership with Bats QLD wildlife rescue" />
    <meta name="author" content="NightKind Collective" />

    <meta property="og:title" content="NightKind Collective - Alt Fashion for Bat Conservation" />
    <meta property="og:description" content="Gothic and punk fashion with purpose. Supporting Queensland bat rescue through authentic subcultural style." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="preview.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@nightkindcollective" />
    <meta name="twitter:image" content="preview.png" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="bat vector tracing1.svg">
    <link rel="icon" type="image/png" href="bat vector tracing1.svg">
    
    <!-- Gothic/Alternative Fonts -->
    <link rel="stylesheet" href="fonts.css">
    <script type="module" crossorigin src="index-B11PqZaG.js"></script>
    <link rel="stylesheet" crossorigin href="index-CZEDu5tD.css">
    
    <style>
      /* Logo Animation Styles */
      @keyframes logoFloat {
        0%, 100% {
          transform: translateY(0px) rotate(0deg);
        }
        50% {
          transform: translateY(-10px) rotate(2deg);
        }
      }
      
      /* Adjust overlay height to accommodate the logo */
      .absolute.inset-0.bg-black\/60 {
        height: calc(100vh - 200px) !important;
        top: 200px !important;
      }
      
      /* Adjust the main hero section height */
      .relative.h-screen.flex.items-center.justify-center.bg-cover.bg-center {
        height: calc(100vh - 200px) !important;
        min-height: calc(100vh - 200px) !important;
      }
    </style>
  </head>

  <body>
    <div id="root"></div>
    
    <script>
      // Handle 404 errors when opening locally
      window.addEventListener('error', function(e) {
        if (e.target.tagName === 'SCRIPT' || e.target.tagName === 'LINK') {
          console.warn('Resource failed to load:', e.target.src || e.target.href);
        }
      });

      // Fallback for local development
      if (window.location.protocol === 'file:') {
        console.log('Running locally - some features may be limited');
        // Add a banner to inform users
        const banner = document.createElement('div');
        banner.style.cssText = `
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          background: linear-gradient(90deg, #ff6b6b, #ff8e53);
          color: white;
          padding: 10px;
          text-align: center;
          font-family: 'Courier Prime', monospace;
          font-size: 14px;
          z-index: 10000;
          box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        `;
        banner.innerHTML = '⚠️ Running locally - Use <strong>start-server.bat</strong> for full functionality';
        document.body.appendChild(banner);
      }

      // Wait for the React app to load and render the content
      function waitForShopCards() {
        // Look for the shop section with category cards
        const shopSection = document.querySelector('.grid.md\\:grid-cols-2.lg\\:grid-cols-4');
        
        if (shopSection) {
          // Find all category cards within the grid
          const categoryCards = shopSection.querySelectorAll('.gothic-card');
          
          // Add click handlers to each card
          categoryCards.forEach((card, index) => {
            card.style.cursor = 'pointer';
            
            // Define the category pages in order
            const categoryPages = [
              'stickers.html',
              'keychains.html', 
              'pins.html',
              'tshirts.html'
            ];
            
            // Add click handler
            card.addEventListener('click', () => {
              if (categoryPages[index]) {
                window.location.href = categoryPages[index];
              }
            });
            
            // Add hover effect to show it's clickable
            card.addEventListener('mouseenter', () => {
              card.style.transform = 'scale(1.05)';
            });
            
            card.addEventListener('mouseleave', () => {
              card.style.transform = 'scale(1)';
            });
          });
          
          console.log(`Found ${categoryCards.length} category cards and made them clickable`);
        } else {
          // If not found yet, try again in a moment
          setTimeout(waitForShopCards, 100);
        }
      }
      
      // Start checking for the shop cards once the page loads
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', waitForShopCards);
      } else {
        waitForShopCards();
      }
      
      // Also check after a delay to ensure React has rendered
      setTimeout(waitForShopCards, 1000);

      // Add logo to the main page
      function addLogoToMainPage() {
        console.log('Attempting to add logo...');
        
        // Try multiple selectors to find the right place
        const selectors = [
          'header', '.header', '[class*="header"]',
          'main', '.main', '[class*="main"]',
          '.hero', '[class*="hero"]',
          '.container', '[class*="container"]',
          '.content', '[class*="content"]',
          '.app', '[class*="app"]',
          '#root > div:first-child',
          '#root > *:first-child'
        ];
        
        let targetElement = null;
        
        for (let selector of selectors) {
          const element = document.querySelector(selector);
          if (element) {
            console.log('Found target element:', selector);
            targetElement = element;
            break;
          }
        }
        
        // If still no target, try the root div
        if (!targetElement) {
          targetElement = document.getElementById('root');
          console.log('Using root element as target');
        }
        
        if (targetElement) {
          // Check if logo already exists
          if (document.querySelector('.nightkind-logo')) {
            console.log('Logo already exists, skipping...');
            return;
          }
          
          // Create logo container
          const logoContainer = document.createElement('div');
          logoContainer.className = 'nightkind-logo';
          logoContainer.style.cssText = `
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 2rem auto;
            padding: 1rem;
            position: relative;
            z-index: 1000;
            width: 100%;
            max-width: 200px;
          `;
          
          // Create logo image
          const logo = document.createElement('img');
          logo.src = 'bat vector tracing1.svg';
          logo.alt = 'NightKind Collective Logo';
          logo.style.cssText = `
            width: 150px;
            height: auto;
            filter: drop-shadow(0 0 20px hsla(270, 100%, 70%, 0.8));
            transition: all 0.4s ease;
            cursor: pointer;
            display: block;
            animation: logoFloat 4s ease-in-out infinite;
          `;
          
          // Add hover effects
          logo.addEventListener('mouseenter', () => {
            logo.style.filter = 'drop-shadow(0 0 30px hsla(270, 100%, 70%, 1))';
            logo.style.transform = 'scale(1.1) rotate(5deg)';
          });
          
          logo.addEventListener('mouseleave', () => {
            logo.style.filter = 'drop-shadow(0 0 20px hsla(270, 100%, 70%, 0.8))';
            logo.style.transform = 'scale(1) rotate(0deg)';
          });
          
          // Add click to go to shop
          logo.addEventListener('click', () => {
            window.location.href = 'shop-categories.html';
          });
          
          logoContainer.appendChild(logo);
          
          // Try to insert at the very beginning of the target
          if (targetElement.firstChild) {
            targetElement.insertBefore(logoContainer, targetElement.firstChild);
          } else {
            targetElement.appendChild(logoContainer);
          }
          
          console.log('Logo successfully added to main page!');
        } else {
          console.log('No target element found, retrying...');
          // If no good target found, try again in a moment
          setTimeout(addLogoToMainPage, 1000);
        }
      }
      
      // Start trying to add the logo once the page loads
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', addLogoToMainPage);
      } else {
        addLogoToMainPage();
      }
      
      // Try multiple times to ensure it loads after React renders
      setTimeout(addLogoToMainPage, 1000);
      setTimeout(addLogoToMainPage, 2000);
      setTimeout(addLogoToMainPage, 3000);
      setTimeout(addLogoToMainPage, 5000);
      
      // Also try when the window loads completely
      window.addEventListener('load', addLogoToMainPage);

      // Add click handler for "Support Bats QLD" button
      function addBatsQLDButtonHandler() {
        const buttons = document.querySelectorAll('button, a, [class*="button"], [class*="btn"]');
        
        buttons.forEach(button => {
          const text = button.textContent || button.innerText || '';
          if (text.toLowerCase().includes('support bats qld') || 
              text.toLowerCase().includes('support bats') ||
              text.toLowerCase().includes('bats qld')) {
            
            // Check if this button already has our handler
            if (button.hasAttribute('data-bats-qld-handler')) {
              return; // Skip if already handled
            }
            
            console.log('Found Bats QLD button:', text);
            
            // Mark this button as handled
            button.setAttribute('data-bats-qld-handler', 'true');
            
            button.addEventListener('click', (e) => {
              e.preventDefault();
              e.stopPropagation();
              window.open('https://bats.org.au/get-involved/donate/', '_blank');
            });
            
            // Also make it look clickable
            button.style.cursor = 'pointer';
          }
        });
      }
      
      // Try to add the button handler multiple times
      setTimeout(addBatsQLDButtonHandler, 1000);
      setTimeout(addBatsQLDButtonHandler, 2000);
      setTimeout(addBatsQLDButtonHandler, 3000);
      setTimeout(addBatsQLDButtonHandler, 5000);
      
      // Also try when the window loads completely
      window.addEventListener('load', addBatsQLDButtonHandler);

      // Fix navigation links in the React app
      function fixNavigationLinks() {
        // Find all navigation links and fix them
        const links = document.querySelectorAll('a[href="/shop"], a[href="/about"], a[href="/contact"]');
        
        links.forEach(link => {
          const href = link.getAttribute('href');
          
          if (href === '/shop') {
            link.href = 'shop-categories.html';
          } else if (href === '/about') {
            link.href = 'about.html';
          } else if (href === '/contact') {
            link.href = 'contact.html';
          }
          
          // Add click handler to prevent React routing
          link.addEventListener('click', (e) => {
            e.preventDefault();
            window.location.href = link.href;
          });
        });
      }
      
      // Also redirect any shop-related buttons or links that might exist
      function redirectShopElements() {
        // Look for any shop-related elements and redirect them
        const shopElements = document.querySelectorAll('a, button, [class*="shop"], [class*="store"]');
        
        shopElements.forEach(element => {
          const text = (element.textContent || element.innerText || '').toLowerCase();
          const href = element.getAttribute('href') || '';
          
          // If it looks like a shop link but doesn't already point to our shop page
          if ((text.includes('shop') || text.includes('store') || text.includes('buy') || text.includes('merch')) && 
              !href.includes('shop-categories.html') && 
              !element.hasAttribute('data-shop-redirected')) {
            
            console.log('Redirecting shop element:', text);
            
            // Mark as redirected to prevent duplicate handling
            element.setAttribute('data-shop-redirected', 'true');
            
            // Add click handler to redirect to our shop page
            element.addEventListener('click', (e) => {
              e.preventDefault();
              e.stopPropagation();
              window.location.href = 'shop-categories.html';
            });
            
            // Make it look clickable
            element.style.cursor = 'pointer';
          }
        });
      }
      
      // Try to fix navigation links multiple times
      setTimeout(fixNavigationLinks, 1000);
      setTimeout(fixNavigationLinks, 2000);
      setTimeout(fixNavigationLinks, 3000);
      setTimeout(fixNavigationLinks, 5000);
      
      // Also try when the window loads completely
      window.addEventListener('load', fixNavigationLinks);
      
      // Try to redirect shop elements multiple times
      setTimeout(redirectShopElements, 1000);
      setTimeout(redirectShopElements, 2000);
      setTimeout(redirectShopElements, 3000);
      setTimeout(redirectShopElements, 5000);
      
      // Also try when the window loads completely
      window.addEventListener('load', redirectShopElements);
    </script>
  </body>
</html>

